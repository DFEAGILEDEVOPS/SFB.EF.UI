<a routerLink='/efficiency-metric/{{urn}}' class="govuk-back-link">Back to the efficiency metric ranking</a>

<hr class="govuk-section-break govuk-section-break--m">

<h1 class="govuk-heading-xl">Contact details</h1>

<hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-half">
    <a [routerLink]="" (click)='onResultSectionStateToggle()' class="govuk-link a-button map-toggle-button">
      <img src="assets/images/icon-map.png" class="small-icon" />
      <span *ngIf='this.resultSectionState === "list-view"'>View on a map</span>
      <span *ngIf='this.resultSectionState === "map-view"'>View as list</span>
    </a>
  </div>
  <div class="govuk-grid-column-one-half" [hidden]='resultSectionState === "map-view"'>
    <div class="govuk-form-group">
      <div class="sort-select-wrapper">
        <label class="govuk-label sort-select-wrapper__label" for="sort">Sorted by</label>
        <select class="govuk-select sort-select-wrapper__select" id="sort" name="sort" [(ngModel)]='sort'
          (change)='sortSchools()'>
          <option value="Rank">Efficiency metric ranking</option>
          <option value="AlphabeticalAZ">Alphabetical (A-Z)</option>
          <option value="AlphabeticalZA">Alphabetical (Z-A)</option>
        </select>
      </div>
    </div>
  </div>
</div>

<div [hidden]='resultSectionState === "list-view"'>
  <app-contact-map [visibleSchoolList]='visibleSchoolList'></app-contact-map>
</div>

<div [hidden]='resultSectionState === "map-view"'>
  <div *ngFor='let neighbour of visibleSchoolList; let i = index'>
    <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
    <a class="govuk-link govuk-body-m govuk-!-font-weight-bold school-link" href="{{settings.sfbDomain}}/school/detail?urn={{neighbour.urn}}">
      {{neighbour.name}}
    </a>
    <hr class="govuk-section-break govuk-section-break--m">
    <ul class="details-list govuk-list govuk-body-s">
      <li><strong>Address: </strong><span>{{neighbour.address}}</span></li>
      <li><strong>Telephone: </strong><span>{{neighbour.telephone}}</span></li>
      <li><strong>Headteacher: </strong><span>{{neighbour.headTeacher}}</span></li>
      <li><strong>School phase: </strong><span>{{neighbour.overallPhase}} ({{neighbour.pupils}} pupils)</span></li>
      <li><strong>School type: </strong><span>{{neighbour.schoolType}}</span></li>
      <li><strong>Efficiency metric ranking: </strong><span class="em-rank-text em-rank-text--{{neighbour.rank}}">{{neighbour.rank}}</span></li>
    </ul>
  </div>
</div>
