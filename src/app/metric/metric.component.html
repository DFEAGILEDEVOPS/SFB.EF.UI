<app-metric-bread-crumb [urn]='model.urn' [name]='model.name'></app-metric-bread-crumb>

<h1 class="govuk-heading-xl">Efficiency Metric Ranking</h1>
<p class="govuk-body-s">
  Results for
  <span class="highlight">
    <span class="govuk-!-font-weight-bold">{{model.name}}</span>
  </span>
</p>

<div class="govuk-grid-row govuk-body em-rank-content-wrapper">
  <div class="govuk-grid-column-full">
    <div class="em-rank-icon">
      <span class="em-rank-icon__text em-rank-text--{{model.rank}}">{{model.rank}}</span>
    </div>
    <div class="em-rank-content">
      <span class="govuk-!-font-size-24 govuk-!-font-weight-bold">This school's Efficiency Metric Ranking is {{model.rank}}</span>
      <br>
      <span>This means <span class="govuk-!-font-weight-bold">{{(model.rank-1)*0.1  | percent}}</span> of similar schools get better pupil progress for a similar amount of money.</span>
      <br>
      <a [routerLink]="" (click)='openModal(template)' class="govuk-link" >How we calculate the Efficiency Metric Ranking</a>
    </div>
  </div>
</div>

<app-ways-to-improve (showDetails)='emTable.onColumnDetailsShow()' [urn]='model.urn' [name]='model.name'></app-ways-to-improve>

<app-em-table [model]='model' #emTable></app-em-table>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Methodology</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">Close</span>
    </button>
  </div>
  <div class="modal-body">
    <p>The efficiency metric algorithm looks for 50 schools across the country which are similar to your school based on:</p>
    <ul class="govuk-list govuk-list--bullet govuk-body-s govuk-!-font-weight-bold ul-two-cols">
      <li>Pupils eligible for FSM in the last 6 years</li>
      <li>Number of pupils</li>
      <li>Pupils with a SEN statement or EHCP</li>
      <li>School phase</li>
      <li>School type</li>
    </ul>
    <p>We divide these school's progress score by their expenditure per pupil (we will standardise the score) allowing us to rank the 50 schools.</p>
    <p class="govuk-!-font-weight-bold">
      Standardised progress score / Expenditure per pupil = Efficiency Metric Ranking
    </p>
  </div>
</ng-template>


